<!DOCTYPE html>
<html lang="en">
<head>
    {% include "_head.html" %}
</head>
<body>
    {% include "_header.html" %}
    <main id="content">
        <div class="graph-placeholder">
            <h2>Dependency Graph</h2>
            <p class="placeholder-message">Graph visualization coming soon. Static mockup below:</p>

            <div class="graph-mockup">
                <svg width="800" height="400" viewBox="0 0 800 400">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="var(--text-muted)" />
                        </marker>
                    </defs>

                    <!-- Level 0: Epic -->
                    <g class="node epic" transform="translate(400, 60)">
                        <rect x="-90" y="-30" width="180" height="60" rx="6" fill="var(--bg-secondary)" stroke="#9b59b6" stroke-width="2"/>
                        <text x="0" y="-5" text-anchor="middle" fill="var(--text-primary)" font-size="12" font-weight="500">Release 1.0</text>
                        <text x="0" y="12" text-anchor="middle" fill="var(--text-muted)" font-size="10">epic-001</text>
                    </g>

                    <!-- Level 1: Tasks -->
                    <g class="node task" transform="translate(200, 180)">
                        <rect x="-80" y="-25" width="160" height="50" rx="6" fill="var(--bg-secondary)" stroke="var(--accent)" stroke-width="2"/>
                        <text x="0" y="-3" text-anchor="middle" fill="var(--text-primary)" font-size="11">Implement API</text>
                        <text x="0" y="12" text-anchor="middle" fill="var(--text-muted)" font-size="9">task-001</text>
                    </g>

                    <g class="node task" transform="translate(400, 180)">
                        <rect x="-80" y="-25" width="160" height="50" rx="6" fill="var(--bg-secondary)" stroke="#7eb8da" stroke-width="2"/>
                        <text x="0" y="-3" text-anchor="middle" fill="var(--text-primary)" font-size="11">Design UI</text>
                        <text x="0" y="12" text-anchor="middle" fill="var(--text-muted)" font-size="9">task-002 (in progress)</text>
                    </g>

                    <g class="node task" transform="translate(600, 180)">
                        <rect x="-80" y="-25" width="160" height="50" rx="6" fill="var(--bg-secondary)" stroke="var(--text-muted)" stroke-width="1" opacity="0.6"/>
                        <text x="0" y="-3" text-anchor="middle" fill="var(--text-muted)" font-size="11">Write Docs</text>
                        <text x="0" y="12" text-anchor="middle" fill="var(--text-muted)" font-size="9">task-003 (closed)</text>
                    </g>

                    <!-- Level 2: Sub-tasks -->
                    <g class="node subtask" transform="translate(150, 300)">
                        <rect x="-70" y="-22" width="140" height="44" rx="4" fill="var(--bg-secondary)" stroke="var(--accent)" stroke-width="1"/>
                        <text x="0" y="-2" text-anchor="middle" fill="var(--text-primary)" font-size="10">Auth endpoints</text>
                        <text x="0" y="12" text-anchor="middle" fill="var(--text-muted)" font-size="8">task-001.1</text>
                    </g>

                    <g class="node subtask" transform="translate(300, 300)">
                        <rect x="-70" y="-22" width="140" height="44" rx="4" fill="var(--bg-secondary)" stroke="#d48a8a" stroke-width="2"/>
                        <text x="0" y="-2" text-anchor="middle" fill="var(--text-primary)" font-size="10">Data endpoints</text>
                        <text x="0" y="12" text-anchor="middle" fill="#d48a8a" font-size="8">task-001.2 (blocked)</text>
                    </g>

                    <g class="node subtask" transform="translate(500, 300)">
                        <rect x="-70" y="-22" width="140" height="44" rx="4" fill="var(--bg-secondary)" stroke="var(--text-muted)" stroke-width="1" opacity="0.6"/>
                        <text x="0" y="-2" text-anchor="middle" fill="var(--text-muted)" font-size="10">Wireframes</text>
                        <text x="0" y="12" text-anchor="middle" fill="var(--text-muted)" font-size="8">task-002.1 (closed)</text>
                    </g>

                    <!-- Edges: Epic to Tasks -->
                    <line x1="400" y1="90" x2="200" y2="155" stroke="var(--border-color)" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <line x1="400" y1="90" x2="400" y2="155" stroke="var(--border-color)" stroke-width="2" marker-end="url(#arrowhead)"/>
                    <line x1="400" y1="90" x2="600" y2="155" stroke="var(--border-color)" stroke-width="2" marker-end="url(#arrowhead)"/>

                    <!-- Edges: Tasks to Sub-tasks -->
                    <line x1="200" y1="205" x2="150" y2="278" stroke="var(--border-color)" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                    <line x1="200" y1="205" x2="300" y2="278" stroke="var(--border-color)" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                    <line x1="400" y1="205" x2="500" y2="278" stroke="var(--border-color)" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                </svg>
            </div>

            <div class="graph-legend" style="margin-top: 24px;">
                <h3>Legend</h3>
                <div class="legend-items">
                    <div class="legend-item"><span class="legend-color status-open"></span> Open</div>
                    <div class="legend-item"><span class="legend-color status-in_progress"></span> In Progress</div>
                    <div class="legend-item"><span class="legend-color status-blocked"></span> Blocked</div>
                    <div class="legend-item"><span class="legend-color status-closed"></span> Closed</div>
                </div>
            </div>
        </div>
    </main>
</body>
</html>
