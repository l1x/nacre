<!DOCTYPE html>
<html lang="en">
<head>
    {% include "_head.html" %}
</head>
<body>
    {% include "_header.html" %}
    <main id="content">
        <div class="graph-page">
            <div class="graph-header">
                <h2>Dependency Graph</h2>
                <div class="graph-controls">
                    <label for="epic-select">Epic:</label>
                    <select id="epic-select" class="graph-select">
                        <option value="">Select an epic...</option>
                        {% for epic in epics %}
                        <option value="{{ epic.id }}"{% if epic.selected %} selected{% endif %}>
                            {{ epic.id }}: {{ epic.title }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="graph-tree-container">
                {% if tree_html.is_empty() %}
                <div class="graph-empty-state">Select an epic to view its dependency tree</div>
                {% else %}
                {{ tree_html|safe }}
                {% endif %}
            </div>

            <div class="graph-legend">
                <h3>Legend</h3>
                <div class="legend-section">
                    <h4>Status</h4>
                    <div class="legend-items">
                        <div class="legend-item"><span class="legend-color status-open"></span> Open</div>
                        <div class="legend-item"><span class="legend-color status-in_progress"></span> In Progress</div>
                        <div class="legend-item"><span class="legend-color status-blocked"></span> Blocked</div>
                        <div class="legend-item"><span class="legend-color status-closed"></span> Closed</div>
                    </div>
                </div>
                <div class="legend-section">
                    <h4>Type</h4>
                    <div class="legend-items">
                        <div class="legend-item"><span class="legend-color type-epic"></span> Epic</div>
                        <div class="legend-item"><span class="legend-color type-feature"></span> Feature</div>
                        <div class="legend-item"><span class="legend-color type-task"></span> Task</div>
                        <div class="legend-item"><span class="legend-color type-bug"></span> Bug</div>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% include "_footer.html" %}
</body>
</html>
